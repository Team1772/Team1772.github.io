webpackJsonp([9],{104:function(e,t,n){"use strict";var a=n(51);t.a=[{path:"/:team/events",name:"EventsFeed",component:n(395),meta:{headerLabel:"Eventos",sidenavLabel:"Eventos"}},{path:"/:team/events/:id",name:"EventDetails",component:function(){return n.e(3).then(n.bind(null,414))},meta:{headerLabel:"Eventos"}},{path:"/:team/scouting",name:"ScoutingHome",component:function(){return n.e(2).then(n.bind(null,415))},meta:{headerLabel:"Scouting",sidenavLabel:"Scouting"}},{path:"/:team/manage-users",name:"ManageUsers",component:n(396),meta:{headerLabel:"Gerenciamento de usuários"}},{path:"/createTeam/:token",name:"CreateTeam",component:n(394),meta:{headerLabel:"Criar Time"}},{path:"*",redirect:function(){var e=a.a.getLoggedUser();return e?e.displayName+"/events":"/0000/events"}}]},175:function(e,t,n){"use strict";t.a={default:{primary:{color:"blue",hue:"600"},accent:{color:"blue",hue:"300"},warn:"red"}}},176:function(e,t){},177:function(e,t){},178:function(e,t,n){function a(e){n(365)}var r=n(19)(n(315),n(397),a,null,null);e.exports=r.exports},182:function(e,t){function n(e){return e<10?"0"+e:e}e.exports={formatDates:function(e){var t=[];return e.forEach(function(e){var n=new Date(e.value);n.setDate(n.getDate()+1),t.push({times:e.times,value:String(n)})}),t},unformatDates:function(e){return e.map(function(e){return e.value=new Date(e.value).toISOString().substring(0,10),e})},getDefaultFormat:function(e){return e=new Date(e),e={day:n(e.getDate()),month:n(e.getMonth()+1),year:e.getFullYear(),hours:n(e.getHours()),minutes:n(e.getMinutes())},e.day+"/"+e.month+"/"+e.year+" às "+e.hours+":"+e.minutes},getDatesWithoutTime:function(e){return e.map(function(e){return e=new Date(e.value),e={day:n(e.getDate()),month:n(e.getMonth()+1),year:e.getFullYear()}," "+e.day+"/"+e.month+"/"+e.year+" \n"}).join("\n")},getDateWithoutTime:function(e){return e=new Date(e.value),e={day:n(e.getDate()),month:n(e.getMonth()+1),year:e.getFullYear()}," "+e.day+"/"+e.month+"/"+e.year},getOrderDateFrom:function(e){e[0]&&e[0].value&&(e=e.map(function(e){return new Date(e.value)}));var t=e[0];return e.forEach(function(e){e>t&&(t=e)}),-+t}}},313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(50),r=n(180),i=n(179),s=n.n(i),o=n(176),u=(n.n(o),n(104)),d=n(175),c=n(177);n.n(c);a.default.use(r.a),a.default.use(s.a);var l=new a.default;a.default.prototype.$emitAll=function(e,t){return l.$emit(e,t)},a.default.prototype.$onAll=function(e,t){return l.$on(e,t)},n.e(7).then(n.bind(null,364)),a.default.material.registerTheme("default",d.a.default),a.default.config.productionTip=!1,new a.default({el:"#app",router:new r.a({routes:u.a}),render:function(e){return e(n(178))}})},314:function(e,t,n){"use strict";var a=n(327),r=n.n(a),i=n(326),s=n.n(i),o=n(159),u=n.n(o),d=n(325),c=n.n(d),l=n(160),m=n.n(l),f=n(105),p=n.n(f),v=n(379),h=n.n(v),g=n(50),b=n(378),_=(n.n(b),this),w={apiKey:"AIzaSyCShacT6sUE9q4OHamVw3aT3NS3Ll4Jeak",authDomain:"team-work-1772.firebaseapp.com",databaseURL:"https://team-work-1772.firebaseio.com",projectId:"team-work-1772",storageBucket:"team-work-1772.appspot.com",messagingSenderId:"358872766976"},y=h.a.initializeApp(w),E=h.a.initializeApp(w,"Secondary"),S=/\/[0-9]*\//g.exec(window.location.hash),x=S&&S[0]?S[0].replace(/\//g,""):null,A=h.a.firestore().collection("teams").doc(x||"0000");y.auth().onAuthStateChanged(function(e){if(e){var t={uid:e.uid,username:e.email.split("@")[0],email:e.email,displayName:e.displayName};A.collection("users").doc(e.uid).get().then(function(e){t=p()(m()({},e.data()),t),localStorage.setItem("USER",c()(t)),g.default.prototype.$emitAll("UPDATE_USER",t)}),localStorage.setItem("USER",c()(t))}}),t.a={db:A,auth:y.auth(),createUser:function(e){return new u.a(function(){var t=s()(r.a.mark(function t(n,a){var i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.auth().createUserWithEmailAndPassword(e.username,e.password);case 3:return i=t.sent,t.next=6,E.auth().currentUser.updateProfile({displayName:e.teamNumber});case 6:n(i),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a(t.t0);case 12:case"end":return t.stop()}},t,_,[[0,9]])}));return function(e,n){return t.apply(this,arguments)}}())},deleteUser:function(e){return new u.a(function(){var t=s()(r.a.mark(function t(n,a){var i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.auth().getUser(e);case 3:i=t.sent,i.delete(),n({uid:e}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a(t.t0);case 11:case"end":return t.stop()}},t,_,[[0,8]])}));return function(e,n){return t.apply(this,arguments)}}())}}},315:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app",components:{Navbar:n(391),SideNav:n(392),Login:n(393),Snackbar:function(){return n.e(5).then(n.bind(null,412))}},data:function(){return{}}}},316:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"user-button",data:function(){return{user:localStorage.USER}},mounted:function(){var e=this;this.$onAll("UPDATE_USER",function(t){e.user=t})},methods:{logout:function(){localStorage.clear(),this.$emitAll("OPEN_LOGIN")},goToUsersManager:function(){this.$router.push("manage-users/")}}}},317:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(51),r=function(e){return e.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)};t.default={name:"create-team-dialog",props:["from"],data:function(){return{teamNumber:null,email:"",password:"",repeatPassword:"",isEmailValid:!0,isPasswordValid:!0,isRepeatPasswordValid:!0,isCreatingTeam:!1}},methods:{open:function(){this.$refs["create-team-dialog"].open()},close:function(){this.$refs["create-team-dialog"].close()},matchPasswords:function(){this.isRepeatPasswordValid=this.password===this.repeatPassword},isAllEmpty:function(){return""===this.email||""===this.password||""===this.repeatPassword},cleanFields:function(){this.teamNumber="",this.email="",this.password="",this.repeatPassword="",this.isEmailValid=!0,this.isPasswordValid=!0,this.isRepeatPasswordValid=!0},isFormValid:function(){return this.isEmailValid=r(this.email),this.isPasswordValid=this.password.length>=8,this.isRepeatPasswordValid=this.password===this.repeatPassword,this.isEmailValid&&this.isPasswordValid&&this.isRepeatPasswordValid},createTeam:function(){var e=this;if(this.isFormValid()){this.isCreatingTeam=!0;var t={token:this.$route.params.token,teamNumber:this.teamNumber,userEmail:this.email,userPassword:this.password,isAdmin:!0};a.a.createTeam(t).then(function(){return setTimeout(function(){return a.a.login(e.email,e.password)},2e3)}).then(function(t){var n=t.displayName;e.close(),window.location.href="#/"+n+"/events",window.location.reload()}).catch(function(t){e.$emitAll("SHOW_SNACKBAR","Não foi possível cadastrar o usuário"),e.isCreatingTeam=!1,console.log(t)})}}},mounted:function(){var e=this;this.$nextTick(function(){e.open()})}}},318:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(182);n.n(a);t.default={name:"item-event",filters:{getDatesWithoutTime:a.getDatesWithoutTime},props:{event:Object},methods:{goToDetails:function(){this.$router.push("events/"+this.event.id)}}}},319:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"nav-bar",components:{UserButton:n(388)},data:function(){return{hiddeNav:!1}},methods:{scrollTop:function(){document.body.scrollTop=0},handleScroll:function(){var e=document.body.scrollTop;Math.abs(this.lastScrollTop-e)<=5||(e>this.lastScrollTop&&e>64?this.nav=!0:e<this.lastScrollTop&&(this.nav=!1),this.lastScrollTop=e)}},mounted:function(){window.addEventListener("scroll",this.handleScroll),window.addEventListener("touchmove",this.handleScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("touchmove",this.handleScroll)}}},320:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(104);t.default={name:"sidenav",data:function(){return{routes:[]}},methods:{changeBodyScroll:function(e){document.body.style["overflow-y"]=e},parseUrl:function(e){return e.replace(":team",this.$route.params.team)}},beforeMount:function(){this.routes=a.a},mounted:function(){var e=this;this.$onAll("OPEN_SIDENAV",function(){e.$refs.leftSidenav.toggle()})}}},321:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"snackbar",data:function(){return{message:""}},mounted:function(){var e=this;this.$onAll("SHOW_SNACKBAR",function(t){e.show(t)})},methods:{show:function(e){e&&(this.message=e,this.$refs.snackbar.open())}}}},322:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={components:{CreateTeamDialog:n(389)}}},323:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(51);t.default={data:function(){return{isLoading:!0,events:[]}},components:{ItemEvent:n(390),FabButton:function(){return n.e(0).then(n.bind(null,181))},EventFormDialog:function(){return n.e(1).then(n.bind(null,410))}},mounted:function(){var e=this;a.a.getEvents(function(t,n){if(e.isLoading=!1,t)return"permission-denied"===t.code?e.$emitAll("OPEN_LOGIN"):e.$emitAll("SHOW_SNACKBAR","Desculpe algo aconteceu errado [code] ",t.code);e.updateEvents(n)})},methods:{updateEvents:function(e){this.events=e}}}},324:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(51);t.default={components:{FabButton:function(){return n.e(0).then(n.bind(null,181))},UserCard:function(){return n.e(4).then(n.bind(null,413))},CreateUser:function(){return n.e(6).then(n.bind(null,411))}},data:function(){return{isLoading:!0,users:[]}},mounted:function(){var e=this;a.a.getUsers(function(t,n){if(e.isLoading=!1,t)return"permission-denied"===t.code?(e.$emitAll("OPEN_LOGIN"),e.$router.go(-1),e.$emitAll("SHOW_SNACKBAR","Você não tem permissão para acessar essa pagina")):e.$emitAll("SHOW_SNACKBAR","Desculpe algo aconteceu errado [code] ",t.code);e.updateUsers(n)})},methods:{updateUsers:function(e){this.users=e}}}},365:function(e,t){},366:function(e,t){},367:function(e,t){},368:function(e,t){},369:function(e,t){},370:function(e,t){},371:function(e,t){},372:function(e,t){},373:function(e,t){},374:function(e,t){},388:function(e,t,n){function a(e){n(369)}var r=n(19)(n(316),n(401),a,"data-v-5a611486",null);e.exports=r.exports},389:function(e,t,n){function a(e){n(367)}var r=n(19)(n(317),n(399),a,"data-v-37c30ca0",null);e.exports=r.exports},390:function(e,t,n){function a(e){n(366)}var r=n(19)(n(318),n(398),a,"data-v-2e172d47",null);e.exports=r.exports},391:function(e,t,n){function a(e){n(371)}var r=n(19)(n(319),n(403),a,"data-v-7bed3774",null);e.exports=r.exports},392:function(e,t,n){function a(e){n(370)}var r=n(19)(n(320),n(402),a,"data-v-7b16ed84",null);e.exports=r.exports},393:function(e,t,n){function a(e){n(373)}var r=n(19)(n(321),n(405),a,"data-v-8a5e1c00",null);e.exports=r.exports},394:function(e,t,n){function a(e){n(368)}var r=n(19)(n(322),n(400),a,"data-v-3a620f48",null);e.exports=r.exports},395:function(e,t,n){function a(e){n(372)}var r=n(19)(n(323),n(404),a,"data-v-88ee05b4",null);e.exports=r.exports},396:function(e,t,n){function a(e){n(374)}var r=n(19)(n(324),n(406),a,"data-v-ebd12038",null);e.exports=r.exports},397:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("navbar"),n("side-nav"),n("router-view",{staticClass:"routes"}),n("login"),n("snackbar")],1)},staticRenderFns:[]}},398:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-card",{attrs:{id:"card-example",id:e.event.key}},[n("md-card-area",{attrs:{"md-inset":"md-inset"},nativeOn:{click:function(t){e.goToDetails(t)}}},[n("md-card-header",[n("h2",{staticClass:"md-title"},[e._v(e._s(e.event.name))]),n("div",{staticClass:"md-subhead"},[n("md-icon",[e._v("location_on")]),n("span",[e._v(e._s(" "+e.event.address))])],1),n("div",{staticClass:"md-subhead"},[n("md-icon",[e._v("event_available")]),n("span",[e._v(e._s(e._f("getDatesWithoutTime")(e.event.dates)))])],1)])],1)],1)},staticRenderFns:[]}},399:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("md-dialog",{directives:[{name:"show",rawName:"v-show",value:!e.isCreatingTeam,expression:"!isCreatingTeam"}],ref:"create-team-dialog",staticClass:"dialog-container",attrs:{"md-open-from":e.from,"md-close-to":e.from,"md-click-outside-to-close":!1}},[n("md-dialog-title",[n("div",[e._v("Cadastrar Time")])]),n("md-dialog-content",{attrs:{novalidate:"novalidate"}},[n("form",[n("md-input-container",[n("label",[e._v("Número do time")]),n("md-input",{attrs:{type:"number",required:"required"},model:{value:e.teamNumber,callback:function(t){e.teamNumber=t},expression:"teamNumber"}}),n("span",{staticClass:"md-error"},[e._v("Digite um email válido")])],1),n("md-input-container",{class:{"md-input-invalid":!e.isEmailValid}},[n("label",[e._v("Email")]),n("md-input",{attrs:{type:"email",required:"required"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("span",{staticClass:"md-error"},[e._v("Digite um email válido")])],1),n("md-input-container",{class:{"md-input-invalid":!e.isPasswordValid},attrs:{"md-has-password":"md-has-password"}},[n("label",[e._v("Senha")]),n("md-input",{attrs:{type:"password",required:"required"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("span",{staticClass:"md-error"},[e._v("Senha possuir no mín. 8 caracteres")])],1),n("md-input-container",{class:{"md-input-invalid":!e.isRepeatPasswordValid},attrs:{"md-has-password":"md-has-password"}},[n("label",[e._v("Repetir Senha")]),n("md-input",{attrs:{type:"password",required:"required"},model:{value:e.repeatPassword,callback:function(t){e.repeatPassword=t},expression:"repeatPassword"}}),n("span",{staticClass:"md-error"},[e._v("Senhas não são iguais")])],1)],1)]),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary md-raised",attrs:{disabled:e.isAllEmpty()},on:{click:function(t){e.createTeam()}}},[e._v("Criar")])],1)],1),n("md-spinner",{directives:[{name:"show",rawName:"v-show",value:e.isCreatingTeam,expression:"isCreatingTeam"}],staticClass:"margin-top",attrs:{"md-size":125,"md-indeterminate":"md-indeterminate"}})],1)},staticRenderFns:[]}},400:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"create-team"}},[n("create-team-dialog",{attrs:{from:"#create-team"}})],1)},staticRenderFns:[]}},401:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-avatar",{staticClass:"md-avatar-icon has-ripple"},[n("md-ink-ripple"),n("md-menu",{attrs:{"md-size":"2","md-offset-x":"0","md-offset-y":"48"}},[n("md-icon",{attrs:{"md-menu-trigger":"md-menu-trigger"}},[e._v("people")]),n("md-menu-content",[n("md-menu-item",[e._v("Perfil")]),e.user&&e.user.isAdmin?n("md-menu-item",{nativeOn:{click:function(t){e.goToUsersManager(t)}}},[e._v("Usuários")]):e._e(),n("md-menu-item",{nativeOn:{click:function(t){e.logout(t)}}},[e._v("Sair")])],1)],1)],1)},staticRenderFns:[]}},402:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-sidenav",{ref:"leftSidenav",staticClass:"md-left",on:{open:function(t){e.changeBodyScroll("hidden")},close:function(t){e.changeBodyScroll("auto")}}},[n("div",{staticClass:"row main-content"},[n("div",{staticClass:"content"},[n("md-toolbar",{staticClass:"md-small no-color"},[n("md-list-item",{staticClass:"app-title md-toolbar-container"},[n("span",{staticClass:"app-title-2"},[e._v("Team work")])])],1),n("md-list",e._l(e.routes,function(t){return t&&t.meta&&t.meta.sidenavLabel?n("md-list-item",{key:t.name},[n("router-link",{attrs:{to:e.parseUrl(t.path)}},[n("span",[e._v(e._s(t.meta.sidenavLabel))])])],1):e._e()}))],1)])])},staticRenderFns:[]}},403:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-whiteframe",{staticClass:"header",attrs:{"md-elevation":"2"}},[n("md-toolbar",{staticClass:"row justify-between",class:{hidden:e.hiddeNav}},[n("md-button",{staticClass:"md-icon-button",nativeOn:{click:function(t){e.$emitAll("OPEN_SIDENAV")}}},[n("md-icon",[e._v("menu")])],1),n("span",{staticClass:"title-header",on:{click:e.scrollTop}},[e._v(e._s(e.$route.meta.headerLabel))]),n("user-button")],1)],1)},staticRenderFns:[]}},404:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"events-feed"}},[e._l(e.events,function(t){return e.events&&e.events.length>0?n("div",{key:t.id,staticClass:"center-feed"},[n("item-event",{attrs:{event:t}})],1):e._e()}),e.isLoading?n("md-spinner",{staticClass:"margin-top",attrs:{"md-size":125,"md-indeterminate":"md-indeterminate"}}):e._e(),n("fab-button",{on:{click:function(t){e.$refs.eventFormDialog.open()}}}),n("event-form-dialog",{ref:"eventFormDialog",attrs:{dialogTitle:"Novo Evento",buttonAction:"Criar",snackMessage:"Evento criado",propEvent:null}})],2)},staticRenderFns:[]}},405:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-snackbar",{ref:"snackbar",attrs:{"md-position":"bottom center","md-duration":"3000"}},[n("span",[e._v(e._s(e.message))])])},staticRenderFns:[]}},406:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"manage-users"}},[e._l(e.users,function(e){return n("user-card",{key:e.id,attrs:{user:e}})}),e.isLoading?n("md-spinner",{staticClass:"margin-top",attrs:{"md-size":125,"md-indeterminate":"md-indeterminate"}}):e._e(),n("fab-button",{attrs:{id:"fab-user"},on:{click:function(t){e.$refs.createUserDialog.open()}}}),n("create-user",{ref:"createUserDialog",attrs:{from:"#fab-user"}})],2)},staticRenderFns:[]}},51:function(e,t,n){"use strict";var a=n(160),r=n.n(a),i=n(50),s=n(314),o=n(295),u=n.n(o),d=s.a.db.collection("events"),c=s.a.db.collection("users"),l=function(e){return e&&e.data&&e.id?r()({id:e.id},e.data()):e.docs?e.docs.map(function(e){return r()({id:e.id},e.data())}):null};t.a={getEventById:function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.doc(e)).onSnapshot(function(e){return t(null,l(e))},t)},getEvents:function(e){d.orderBy("orderDate").limit(10).onSnapshot(function(t){return e(null,l(t))},e)},addEvent:function(e){return d.add(e)},updateEventById:function(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.doc(e)).set(t)},removeEventById:function(e){return d.doc(e).delete()},getUsers:function(e){c.onSnapshot(function(t){return e(null,l(t))},e)},addUser:function(e){return c.add({username:e.username,teamNumber:e.teamNumber,password:e.password,isAdmin:e.isAdmin})},updateUser:function(e){var t=e.id,n=e.username,a=e.isAdmin;return c.doc(t).set({username:n,isAdmin:a})},deleteUser:function(e){var t=e.id;return c.doc(t).delete()},login:function(e,t){return s.a.auth.signInWithEmailAndPassword(e,t)},getLoggedUser:function(){if(localStorage.USER)try{return JSON.parse(localStorage.USER)}catch(e){localStorage.clear(),i.default.prototype.$emitAll("OPEN_LOGIN")}else localStorage.clear(),i.default.prototype.$emitAll("OPEN_LOGIN")},createTeam:function(e){return u.a.post("https://us-central1-team-work-1772.cloudfunctions.net/createTeamAccount",e)}}}},[313]);