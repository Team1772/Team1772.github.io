webpackJsonp([1],{410:function(t,e,n){function i(t){n(462)}var a=n(19)(n(429),n(485),i,"data-v-27b2bc92",null);t.exports=a.exports},429:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(105),a=n.n(i),s=n(51),o=n(182),r=(n.n(o),function(){return{value:"",times:[d()]}}),d=function(){return{value:"",people:[]}};e.default={name:"eventFormDialog",props:{from:String,dialogTitle:String,buttonAction:String,snackMessage:String,requestType:String,propEvent:Object},data:function(){return{event:{},isUpdate:null}},computed:{eventNormalized:function(){return a()(this.event,{dates:n.i(o.formatDates)(this.event.dates),orderDate:n.i(o.getOrderDateFrom)(this.event.dates),username:s.a.getLoggedUser().username})}},methods:{open:function(){this.$refs.eventFormDialog.open(),this.isUpdate=!!this.event.id,this.isUpdate&&(this.event.dates=n.i(o.unformatDates)(this.event.dates))},close:function(t){var e=this;if(t){if(!1===this.isFormValid())return;var n=void 0;n=this.isUpdate?s.a.updateEventById(this.event.id,this.eventNormalized):s.a.addEvent(this.eventNormalized),n.then(function(){e.$emitAll("SHOW_SNACKBAR",e.snackMessage),e.isUpdate||(e.event=e.setInitialValues()),e.$refs.eventFormDialog.close()}).catch(function(){return e.$emitAll("SHOW_SNACKBAR","Desculpe, tente novamente mais tarde")})}else this.$refs.eventFormDialog.close()},newTime:function(t){this.event.dates[t].times.push(d())},newDate:function(){this.event.dates.push(r())},isFormValid:function(){return!(null===this.event.name||!this.isDateValid(this.event.dates)||null===this.event.address)},isDateValid:function(t){return!t.some(function(t){return null==t.value||""===t.value})},setInitialValues:function(){return{name:null,description:null,address:null,dates:[r()],lastDate:null}}},created:function(){null===this.propEvent?this.event=this.setInitialValues():this.event=this.propEvent}}},447:function(t,e,n){e=t.exports=n(408)(!1),e.push([t.i,".dialog-container[data-v-27b2bc92] .md-dialog{width:100vw;max-width:100%;height:100vh;max-height:100%;overflow-y:auto}.form-container[data-v-27b2bc92]{margin:0 auto;width:90%}.md-dialog-title[data-v-27b2bc92]{margin-bottom:35px}.md-dialog-content[data-v-27b2bc92]{padding:0}.dialog-actions[data-v-27b2bc92]{padding-top:20px}.time-input[data-v-27b2bc92]{padding-left:20px}@media (min-width:612px){.form-container[data-v-27b2bc92]{width:75%}}",""])},462:function(t,e,n){var i=n(447);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(409)("63de5777",i,!0)},485:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("md-dialog",{ref:"eventFormDialog",staticClass:"dialog-container",attrs:{"md-open-from":t.from,"md-close-to":t.from}},[n("div",{staticClass:"form-container"},[n("md-dialog-title",[n("div",[t._v(t._s(t.dialogTitle))])]),n("md-dialog-content",[n("form",{attrs:{novalidate:"novalidate"},on:{submit:function(e){e.stopPropagation(),e.preventDefault(),t.submit(e)}}},[n("md-input-container",[n("label",[t._v("Título")]),n("md-input",{attrs:{required:"required"},model:{value:t.event.name,callback:function(e){t.event.name=e},expression:"event.name"}})],1),n("md-input-container",[n("label",[t._v("Descrição")]),n("md-textarea",{attrs:{maxlength:"1000"},model:{value:t.event.description,callback:function(e){t.event.description=e},expression:"event.description"}})],1),n("md-input-container",[n("md-icon",[t._v("location_on")]),n("label",[t._v("Local")]),n("md-input",{attrs:{required:"required"},model:{value:t.event.address,callback:function(e){t.event.address=e},expression:"event.address"}})],1),t._l(t.event.dates,function(e,i){return n("div",{key:i},[n("md-input-container",[n("md-icon",[t._v("event_available")]),n("label",[t._v("Data")]),n("md-input",{attrs:{required:"required",type:"date"},model:{value:e.value,callback:function(t){e.value=t},expression:"date.value"}}),n("md-button",{staticClass:"md-icon-button",attrs:{"md-raised":"md-raised","md-primary":"md-primary"},on:{click:t.newDate}},[n("md-icon",[t._v("add")])],1)],1),t._l(e.times,function(e,a){return n("div",{key:a},[n("md-input-container",{staticClass:"time-input"},[n("md-icon",[t._v("access_time")]),n("label",{staticClass:"time-input"},[t._v("hh:mm às hh:mm")]),n("md-input",{attrs:{required:"required",placeholder:"Horário"},model:{value:e.value,callback:function(t){e.value=t},expression:"time.value"}}),n("md-button",{staticClass:"md-icon-button",attrs:{"md-raised":"md-raised","md-primary":"md-primary"},on:{click:function(e){t.newTime(i)}}},[n("md-icon",[t._v("add")])],1)],1)],1)})],2)})],2),n("md-layout",{staticClass:"dialog-actions"},[n("md-layout",{attrs:{"md-flex":"50"}},[n("md-button",{staticClass:"md-primary",on:{click:function(e){t.close(!1)}}},[t._v("Cancelar")])],1),n("md-layout",{attrs:{"md-align":"end"}},[n("md-button",{staticClass:"md-primary md-raised",on:{click:function(e){t.close(!0)}}},[t._v(t._s(t.buttonAction))])],1)],1)],1)],1)])],1)},staticRenderFns:[]}}});