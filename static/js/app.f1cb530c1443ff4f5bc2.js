webpackJsonp([9],{101:function(e,t,n){"use strict";var a=n(71);t.a=[{path:"/:team/events",name:"EventsFeed",component:n(363),meta:{headerLabel:"Eventos",sidenavLabel:"Eventos"}},{path:"/:team/events/:id",name:"EventDetails",component:function(){return n.e(3).then(n.bind(null,380))},meta:{headerLabel:"Eventos"}},{path:"/:team/scouting",name:"ScoutingHome",component:function(){return n.e(2).then(n.bind(null,381))},meta:{headerLabel:"Scouting",sidenavLabel:"Scouting"}},{path:"/:team/manage-users",name:"ManageUsers",component:n(364),meta:{headerLabel:"Gerenciamento de usuários"}},{path:"*",redirect:function(){var e=a.a.getLoggedUser();return e?e.displayName+"/events":"/0000/events"}}]},168:function(e,t,n){"use strict";t.a={default:{primary:{color:"blue",hue:"600"},accent:{color:"blue",hue:"300"},warn:"red"}}},169:function(e,t){},170:function(e,t){},171:function(e,t,n){function a(e){n(338)}var r=n(21)(n(290),n(365),a,null,null);e.exports=r.exports},175:function(e,t){function n(e){return e<10?"0"+e:e}e.exports={formatDates:function(e){var t=[];return e.forEach(function(e){var n=new Date(e.value);n.setDate(n.getDate()+1),t.push({times:e.times,value:String(n)})}),t},unformatDates:function(e){return e.map(function(e){return e.value=new Date(e.value).toISOString().substring(0,10),e})},getDefaultFormat:function(e){return e=new Date(e),e={day:n(e.getDate()),month:n(e.getMonth()+1),year:e.getFullYear(),hours:n(e.getHours()),minutes:n(e.getMinutes())},e.day+"/"+e.month+"/"+e.year+" às "+e.hours+":"+e.minutes},getDatesWithoutTime:function(e){return e.map(function(e){return e=new Date(e.value),e={day:n(e.getDate()),month:n(e.getMonth()+1),year:e.getFullYear()}," "+e.day+"/"+e.month+"/"+e.year+" \n"}).join("\n")},getDateWithoutTime:function(e){return e=new Date(e.value),e={day:n(e.getDate()),month:n(e.getMonth()+1),year:e.getFullYear()}," "+e.day+"/"+e.month+"/"+e.year},getOrderDateFrom:function(e){e[0]&&e[0].value&&(e=e.map(function(e){return new Date(e.value)}));var t=e[0];return e.forEach(function(e){e>t&&(t=e)}),-+t}}},288:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(49),r=n(173),o=n(172),i=n.n(o),s=n(169),u=(n.n(s),n(101)),c=n(168),l=n(170);n.n(l);a.default.use(r.a),a.default.use(i.a);var d=new a.default;a.default.prototype.$emitAll=function(e,t){return d.$emit(e,t)},a.default.prototype.$onAll=function(e,t){return d.$on(e,t)},n.e(7).then(n.bind(null,337)),a.default.material.registerTheme("default",c.a.default),a.default.config.productionTip=!1,new a.default({el:"#app",router:new r.a({routes:u.a}),render:function(e){return e(n(171))}})},289:function(e,t,n){"use strict";var a=n(300),r=n.n(a),o=n(299),i=n.n(o),s=n(151),u=n.n(s),c=n(298),l=n.n(c),d=n(152),m=n.n(d),f=n(102),v=n.n(f),p=n(350),h=n.n(p),g=n(49),b=n(349),_=(n.n(b),this),S={apiKey:"AIzaSyCShacT6sUE9q4OHamVw3aT3NS3Ll4Jeak",authDomain:"team-work-1772.firebaseapp.com",databaseURL:"https://team-work-1772.firebaseio.com",projectId:"team-work-1772",storageBucket:"team-work-1772.appspot.com",messagingSenderId:"358872766976"},y=h.a.initializeApp(S),E=h.a.initializeApp(S,"Secondary"),w=/\/[0-9]*\//g.exec(window.location.hash),A=w&&w[0]?w[0].replace(/\//g,""):null,D=h.a.firestore().collection("teams").doc(A||"0000");y.auth().onAuthStateChanged(function(e){if(e){var t={uid:e.uid,username:e.email.split("@")[0],email:e.email,displayName:e.displayName};D.collection("users").doc(e.uid).get().then(function(e){t=v()(m()({},e.data()),t),localStorage.setItem("USER",l()(t)),g.default.prototype.$emitAll("UPDATE_USER",t)}),localStorage.setItem("USER",l()(t))}}),t.a={db:D,auth:y.auth(),createUser:function(e){return new u.a(function(){var t=i()(r.a.mark(function t(n,a){var o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.auth().createUserWithEmailAndPassword(e.username,e.password);case 3:return o=t.sent,t.next=6,E.auth().currentUser.updateProfile({displayName:e.teamNumber});case 6:n(o),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a(t.t0);case 12:case"end":return t.stop()}},t,_,[[0,9]])}));return function(e,n){return t.apply(this,arguments)}}())},deleteUser:function(e){return new u.a(function(){var t=i()(r.a.mark(function t(n,a){var o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.auth().getUser(e);case 3:o=t.sent,o.delete(),n({uid:e}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a(t.t0);case 11:case"end":return t.stop()}},t,_,[[0,8]])}));return function(e,n){return t.apply(this,arguments)}}())}}},290:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app",components:{Navbar:n(360),SideNav:n(361),Login:n(362),Snackbar:function(){return n.e(5).then(n.bind(null,378))}},data:function(){return{}}}},291:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"user-button",data:function(){return{user:localStorage.USER}},mounted:function(){var e=this;this.$onAll("UPDATE_USER",function(t){e.user=t})},methods:{logout:function(){localStorage.clear(),this.$emitAll("OPEN_LOGIN")},goToUsersManager:function(){this.$router.push("manage-users/")}}}},292:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(175);n.n(a);t.default={name:"item-event",filters:{getDatesWithoutTime:a.getDatesWithoutTime},props:{event:Object},methods:{goToDetails:function(){this.$router.push("events/"+this.event.id)}}}},293:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"nav-bar",components:{UserButton:n(358)},data:function(){return{hiddeNav:!1}},methods:{scrollTop:function(){document.body.scrollTop=0},handleScroll:function(){var e=document.body.scrollTop;Math.abs(this.lastScrollTop-e)<=5||(e>this.lastScrollTop&&e>64?this.nav=!0:e<this.lastScrollTop&&(this.nav=!1),this.lastScrollTop=e)}},mounted:function(){window.addEventListener("scroll",this.handleScroll),window.addEventListener("touchmove",this.handleScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("touchmove",this.handleScroll)}}},294:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(101);t.default={name:"sidenav",data:function(){return{routes:[]}},methods:{changeBodyScroll:function(e){document.body.style["overflow-y"]=e},parseUrl:function(e){return e.replace(":team",this.$route.params.team)}},beforeMount:function(){this.routes=a.a},mounted:function(){var e=this;this.$onAll("OPEN_SIDENAV",function(){e.$refs.leftSidenav.toggle()})}}},295:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"snackbar",data:function(){return{message:""}},mounted:function(){var e=this;this.$onAll("SHOW_SNACKBAR",function(t){e.show(t)})},methods:{show:function(e){e&&(this.message=e,this.$refs.snackbar.open())}}}},296:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(71);t.default={data:function(){return{isLoading:!0,events:[]}},components:{ItemEvent:n(359),FabButton:function(){return n.e(0).then(n.bind(null,174))},EventFormDialog:function(){return n.e(1).then(n.bind(null,376))}},mounted:function(){var e=this;a.a.getEvents(function(t,n){if(e.isLoading=!1,t)return"permission-denied"===t.code?e.$emitAll("OPEN_LOGIN"):e.$emitAll("SHOW_SNACKBAR","Desculpe algo aconteceu errado [code] ",t.code);e.updateEvents(n)})},methods:{updateEvents:function(e){this.events=e}}}},297:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(71);t.default={components:{FabButton:function(){return n.e(0).then(n.bind(null,174))},UserCard:function(){return n.e(4).then(n.bind(null,379))},CreateUser:function(){return n.e(6).then(n.bind(null,377))}},data:function(){return{isLoading:!0,users:[]}},mounted:function(){var e=this;a.a.getUsers(function(t,n){if(e.isLoading=!1,t)return"permission-denied"===t.code?(e.$emitAll("OPEN_LOGIN"),e.$router.go(-1),e.$emitAll("SHOW_SNACKBAR","Você não tem permissão para acessar essa pagina")):e.$emitAll("SHOW_SNACKBAR","Desculpe algo aconteceu errado [code] ",t.code);e.updateUsers(n)})},methods:{updateUsers:function(e){this.users=e}}}},338:function(e,t){},339:function(e,t){},340:function(e,t){},341:function(e,t){},342:function(e,t){},343:function(e,t){},344:function(e,t){},345:function(e,t){},358:function(e,t,n){function a(e){n(340)}var r=n(21)(n(291),n(367),a,"data-v-5a611486",null);e.exports=r.exports},359:function(e,t,n){function a(e){n(339)}var r=n(21)(n(292),n(366),a,"data-v-2e172d47",null);e.exports=r.exports},360:function(e,t,n){function a(e){n(342)}var r=n(21)(n(293),n(369),a,"data-v-7bed3774",null);e.exports=r.exports},361:function(e,t,n){function a(e){n(341)}var r=n(21)(n(294),n(368),a,"data-v-7b16ed84",null);e.exports=r.exports},362:function(e,t,n){function a(e){n(344)}var r=n(21)(n(295),n(371),a,"data-v-8a5e1c00",null);e.exports=r.exports},363:function(e,t,n){function a(e){n(343)}var r=n(21)(n(296),n(370),a,"data-v-88ee05b4",null);e.exports=r.exports},364:function(e,t,n){function a(e){n(345)}var r=n(21)(n(297),n(372),a,"data-v-ebd12038",null);e.exports=r.exports},365:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("navbar"),n("side-nav"),n("router-view",{staticClass:"routes"}),n("login"),n("snackbar")],1)},staticRenderFns:[]}},366:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-card",{attrs:{id:"card-example",id:e.event.key}},[n("md-card-area",{attrs:{"md-inset":"md-inset"},nativeOn:{click:function(t){e.goToDetails(t)}}},[n("md-card-header",[n("h2",{staticClass:"md-title"},[e._v(e._s(e.event.name))]),n("div",{staticClass:"md-subhead"},[n("md-icon",[e._v("location_on")]),n("span",[e._v(e._s(" "+e.event.address))])],1),n("div",{staticClass:"md-subhead"},[n("md-icon",[e._v("event_available")]),n("span",[e._v(e._s(e._f("getDatesWithoutTime")(e.event.dates)))])],1)])],1)],1)},staticRenderFns:[]}},367:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-avatar",{staticClass:"md-avatar-icon has-ripple"},[n("md-ink-ripple"),n("md-menu",{attrs:{"md-size":"2","md-offset-x":"0","md-offset-y":"48"}},[n("md-icon",{attrs:{"md-menu-trigger":"md-menu-trigger"}},[e._v("people")]),n("md-menu-content",[n("md-menu-item",[e._v("Perfil")]),e.user&&e.user.isAdmin?n("md-menu-item",{nativeOn:{click:function(t){e.goToUsersManager(t)}}},[e._v("Usuários")]):e._e(),n("md-menu-item",{nativeOn:{click:function(t){e.logout(t)}}},[e._v("Sair")])],1)],1)],1)},staticRenderFns:[]}},368:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-sidenav",{ref:"leftSidenav",staticClass:"md-left",on:{open:function(t){e.changeBodyScroll("hidden")},close:function(t){e.changeBodyScroll("auto")}}},[n("div",{staticClass:"row main-content"},[n("div",{staticClass:"content"},[n("md-toolbar",{staticClass:"md-small no-color"},[n("md-list-item",{staticClass:"app-title md-toolbar-container"},[n("span",{staticClass:"app-title-2"},[e._v("Team work")])])],1),n("md-list",e._l(e.routes,function(t){return t&&t.meta&&t.meta.sidenavLabel?n("md-list-item",{key:t.name},[n("router-link",{attrs:{to:e.parseUrl(t.path)}},[n("span",[e._v(e._s(t.meta.sidenavLabel))])])],1):e._e()}))],1)])])},staticRenderFns:[]}},369:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-whiteframe",{staticClass:"header",attrs:{"md-elevation":"2"}},[n("md-toolbar",{staticClass:"row justify-between",class:{hidden:e.hiddeNav}},[n("md-button",{staticClass:"md-icon-button",nativeOn:{click:function(t){e.$emitAll("OPEN_SIDENAV")}}},[n("md-icon",[e._v("menu")])],1),n("span",{staticClass:"title-header",on:{click:e.scrollTop}},[e._v(e._s(e.$route.meta.headerLabel))]),n("user-button")],1)],1)},staticRenderFns:[]}},370:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"events-feed"}},[e._l(e.events,function(t){return e.events&&e.events.length>0?n("div",{key:t.id,staticClass:"center-feed"},[n("item-event",{attrs:{event:t}})],1):e._e()}),e.isLoading?n("md-spinner",{staticClass:"margin-top",attrs:{"md-size":125,"md-indeterminate":"md-indeterminate"}}):e._e(),n("fab-button",{on:{click:function(t){e.$refs.eventFormDialog.open()}}}),n("event-form-dialog",{ref:"eventFormDialog",attrs:{dialogTitle:"Novo Evento",buttonAction:"Criar",snackMessage:"Evento criado",propEvent:null}})],2)},staticRenderFns:[]}},371:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-snackbar",{ref:"snackbar",attrs:{"md-position":"bottom center","md-duration":"3000"}},[n("span",[e._v(e._s(e.message))])])},staticRenderFns:[]}},372:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"manage-users"}},[e._l(e.users,function(e){return n("user-card",{key:e.id,attrs:{user:e}})}),e.isLoading?n("md-spinner",{staticClass:"margin-top",attrs:{"md-size":125,"md-indeterminate":"md-indeterminate"}}):e._e(),n("fab-button",{attrs:{id:"fab-user"},on:{click:function(t){e.$refs.createUserDialog.open()}}}),n("create-user",{ref:"createUserDialog",attrs:{from:"#fab-user"}})],2)},staticRenderFns:[]}},71:function(e,t,n){"use strict";var a=n(152),r=n.n(a),o=n(49),i=n(289),s=i.a.db.collection("events"),u=i.a.db.collection("users"),c=function(e){return e&&e.data&&e.id?r()({id:e.id},e.data()):e.docs?e.docs.map(function(e){return r()({id:e.id},e.data())}):null};t.a={getEventById:function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.doc(e)).onSnapshot(function(e){return t(null,c(e))},t)},getEvents:function(e){s.orderBy("orderDate").limit(10).onSnapshot(function(t){return e(null,c(t))},e)},addEvent:function(e){return s.add(e)},updateEventById:function(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.doc(e)).set(t)},removeEventById:function(e){return s.doc(e).delete()},getUsers:function(e){u.onSnapshot(function(t){return e(null,c(t))},e)},addUser:function(e){return u.add({username:e.username,teamNumber:e.teamNumber,password:e.password,isAdmin:e.isAdmin})},updateUser:function(e){var t=e.id,n=e.username,a=e.isAdmin;return u.doc(t).set({username:n,isAdmin:a})},deleteUser:function(e){var t=e.id;return u.doc(t).delete()},login:function(e,t){return i.a.auth.signInWithEmailAndPassword(e,t)},getLoggedUser:function(){if(localStorage.USER)try{return JSON.parse(localStorage.USER)}catch(e){localStorage.clear(),o.default.prototype.$emitAll("OPEN_LOGIN")}else localStorage.clear(),o.default.prototype.$emitAll("OPEN_LOGIN")}}}},[288]);